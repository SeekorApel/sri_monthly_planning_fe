<div class="animated fadeIn">
  <div class="col-md-12">
    <div class="card">
      <div class="card-header">
        <strong>Add Header Monthly Palnning</strong>
      </div>
      <div class="card-body">
        <form id="formHeaderMp" class="form form-horizontal">
          <div class="form-group row">
            <label class="col-md-3 col-form-label" for="month-input">Month</label>
            <div class="col-md-9">
              <input class="form-control" id="month_1" type="month" />
            </div>
          </div>
          <div class="form-group row">
            <label class="col-md-3 col-form-label" for="text-input">Revision</label>
            <div class="col-md-9">
              <input type="number" id="revision" name="text-input" class="form-control" placeholder="1,2,3..." />
            </div>
          </div>
          <div class="form-group row">
            <label class="col-md-3 col-form-label" for="text-input">Kadept</label>
            <div class="col-md-9">
              <input type="text" id="kadept" maxlength="5" name="text-input" class="form-control" />
            </div>
          </div>
          <div class="form-group row">
            <label class="col-md-3 col-form-label" for="text-input">Kassie pp</label>
            <div class="col-md-9">
              <input type="text" id="kassie-pp" maxlength="5" name="text-input" class="form-control" />
            </div>
          </div>
          <div class="form-group row">
            <label class="col-md-3 col-form-label" for="text-input">Workday</label>
            <div class="col-md-9">
              <input type="number" id="workday" name="text-input" class="form-control" placeholder="1,2,3..." />
            </div>
          </div>
          <div class="form-group row">
            <label class="col-md-3 col-form-label" for="text-input">Overtime</label>
            <div class="col-md-9">
              <input type="number" id="overtime" name="text-input" class="form-control" placeholder="1,2,3..." />
            </div>
          </div>
          <div class="form-group row">
            <label class="col-md-3 col-form-label">Month of</label>
            <div class="col-md-9">
              <input class="form-control" id="month-of" type="month" placeholder="month" />
            </div>
          </div>
          <div class="form-group row">
            <label class="col-md-3 col-form-label" for="text-input">Section</label>
            <div class="col-md-9">
              <input type="text" id="section" maxlength="10" name="text-input" class="form-control" />
            </div>
          </div>
          <div class="form-group row">
            <label class="col-md-3 col-form-label">Issue Date</label>
            <div class="col-md-9">
              <input class="form-control" id="issue-date" type="date" placeholder="date" />
            </div>
          </div>
        </form>
      </div>
    </div>

    <!-- Table Marketing Order -->
    <div class="card">
      <div class="card-header">
        <strong>&nbsp;Marketing Order</strong>
      </div>
      <div class="card-body">
        <div class="d-flex justify-content-between mb-3">
          <div class="d-flex">
            <input type="text" id="searchInput" placeholder="Search..." class="form-control" style="width: 250px; display: inline" />
            <button class="btn btn-primary ml-2" id="searchButton">Search</button>
          </div>
        </div>
        <div class="table-responsive">
          <table class="table table-bordered table-striped table-sm">
            <thead>
              <tr align="center">
                <th class="align-middle">
                  <input type="checkbox" (change)="selectAll($event)" />
                </th>
                <th class="align-middle">No</th>
                <th class="align-middle">Marketing Order ID</th>
                <th class="align-middle">Type</th>
                <th class="align-middle">Date</th>
                <th class="align-middle">Revision PPC</th>
                <th class="align-middle">Revision Marketing</th>
                <th class="align-middle">Month 1</th>
                <th class="align-middle">Month 2</th>
                <th class="align-middle">Month 3</th>
                <th class="align-middle">Action</th>

              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let order of marketingOrders; let i = index" align="center">
                <td>
                  <input type="checkbox" [(ngModel)]="order.selected" />
                </td>
                <td>{{ order.no }}</td>
                <td>{{ order.orderId }}</td>
                <td>{{ order.type }}</td>
                <td>{{ order.date }}</td>
                <td>{{ order.revision }}</td>
                <td>{{ order.revision }}</td>
                <td>{{ order.month1 }}</td>
                <td>{{ order.month2 }}</td>
                <td>{{ order.month3 }}</td>
                <td>
                  <button type="button" class="btn btn-warning" (click)="navigateToViewMoFrontRear()">
                  <i class="fa fa-check"></i> Mark Front Rear
                </button>
              </td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- Wrap button in a d-flex div with justify-content-end -->
        <div class="d-flex justify-content-end mt-3">
          <button type="button" class="btn btn-success" (click)="generateMonthlyPlanning()">
            <i class="fa fa-file"></i> Generate Monthly Planning
        </button>                
      </div>
      </div>
    </div>

    <div *ngIf="showMonthlyPlanning" class="card">
      <div class="card-header">
        <strong>Table Detail Monthly Palnning</strong>
      </div>
      <div class="card-body">
        <tabset>
          <tab heading="CURING">
            <div class="table-responsive">
              <table class="table table-bordered table-striped table-sm">
                <thead>
                  <tr align="center">
                    <th rowspan="2" class="align-middle">No</th>
                    <th rowspan="2" style="min-width: 150px" class="align-middle">Partnumber</th>
                    <th rowspan="2" style="min-width: 150px" class="align-middle">Size</th>
                    <th rowspan="2" style="min-width: 120px" class="align-middle">Pattern</th>

                    <!-- Header Dinamis untuk Tanggal Bulan Ini -->
                    <th style="min-width: 70px" *ngFor="let hDateTass of dateHeadersTass" [ngClass]="{ 'off-header': hDateTass.isOff, 'overtime-header': hDateTass.isOvertime }">
                      {{ hDateTass.date }}
                    </th>

                    <th rowspan="2" style="min-width: 120px" class="align-middle">Total</th>
                    <th rowspan="2" style="min-width: 120px" class="align-middle">Net Full Fillment</th>
                    <th rowspan="2" style="min-width: 120px" class="align-middle">Gross Req</th>
                    <th rowspan="2" style="min-width: 120px" class="align-middle">Net Req</th>
                    <th colspan="3" style="min-width: 120px" class="align-middle">Req Customer</th>
                    <th colspan="1" style="min-width: 120px" class="align-middle">Selisih</th>
                  </tr>

                  <!-- Baris kedua -->
                  <tr align="center">
                    <th style="min-width: 70px" *ngFor="let cHeaderWo of dateHeadersTass">
                      {{ cHeaderWo.workingDay }}
                    </th>
                    <th class="align-middle">AHM/OEM</th>
                    <th class="align-middle">AHM/REM</th>
                    <th class="align-middle">AHM/FDR</th>
                    <th class="align-middle">OFS</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let mpTass of monthlyPlanningTass; let i = index" align="center">
                    <td>{{ i + 1 }}</td>
                    <td>{{ mpTass.partNumber }}</td>
                    <td>{{ mpTass.size }}</td>
                    <td>{{ mpTass.pattern }}</td>
                    <td *ngFor="let dailyMp of mpTass.detailDailyMp" class="hoverable" (click)="openDmpModal(dailyMp)">
                      {{ dailyMp.countProduction }}
                    </td>
                    <td>{{ calculateTotal() }}</td>
                    <td>
                      <input type="number" [(ngModel)]="mpTass.netFullFillment" class="form-control" />
                    </td>
                    <td>
                      <input type="number" [(ngModel)]="mpTass.grossReq" class="form-control" />
                    </td>
                    <td>
                      <input type="number" [(ngModel)]="mpTass.netReq" class="form-control" />
                    </td>
                    <td>
                      <input type="number" [(ngModel)]="mpTass.reqCustomerAHMOEM" class="form-control" />
                    </td>
                    <td>
                      <input type="number" [(ngModel)]="mpTass.reqCustomerAHMREM" class="form-control" />
                    </td>
                    <td>
                      <input type="number" [(ngModel)]="mpTass.reqCustomerAHMFDR" class="form-control" />
                    </td>
                    <td>
                      <input type="number" [(ngModel)]="mpTass.selisih" class="form-control" />
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </tab>

          <!-- Tab Tass -->
          <tab heading="TASS">
            <div class="table-responsive">
              <table class="table table-bordered table-striped table-sm">
                <thead>
                  <tr align="center">
                    <th class="align-middle">No</th>
                    <th class="align-middle">Marketing Order ID</th>
                    <th class="align-middle">Type</th>
                    <th class="align-middle">Date</th>
                    <th class="align-middle">Revision</th>
                    <th class="align-middle">Month 1</th>
                    <th class="align-middle">Month 2</th>
                    <th class="align-middle">Month 3</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let order of marketingOrders; let i = index" align="center">
                    <td>{{ order.no }}</td>
                    <td>{{ order.orderId }}</td>
                    <td>{{ order.type }}</td>
                    <td>{{ order.date }}</td>
                    <td>{{ order.revision }}</td>
                    <td>{{ order.month1 }}</td>
                    <td>{{ order.month2 }}</td>
                    <td>{{ order.month3 }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </tab>
        </tabset>
      </div>
    </div>
  </div>

  <div class="col-md-12 pb-4">
    <button (click)="navigateToViewMp()" class="btn btn-primary justify-content-start mr-2">Kembali</button>
    <button type="submit" class="btn btn-success">Submit</button>
  </div>
</div>

<!-- Modal Detail Daily -->
<div class="modal fade" id="dmpModal" tabindex="-1" role="dialog" aria-labelledby="Detail Daily Monthly Planning" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addModalLabel">Detail Daily Monthly Planning</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form>
          <!-- <div class="form-group">
            <label for="idDetailDaily">ID Detail Daily:</label>
            <input type="text" id="idDetailDaily" class="form-control" [value]="selectedDetail?.idDetailDaily" readonly />
          </div> -->
          <div class="form-group">
            <label for="countProduction">Shift 1:</label>
            <input type="text" id="countProduction" class="form-control" [value]="10" readonly />
          </div>
          <div class="form-group">
            <label for="countProduction">Shift 2:</label>
            <input type="text" id="countProduction" class="form-control" [value]="90" readonly />
          </div>
          <div class="form-group">
            <label for="countProduction">Shift 3:</label>
            <input type="text" id="countProduction" class="form-control" [value]="800" readonly />
          </div>
          <div class="form-group">
            <label for="countProduction">Machine:</label>
            <input type="text" id="countProduction" class="form-control" value="CURING AB 4 ST CHOP GD B NO.004" readonly />
          </div>
          <div class="form-group">
            <label for="countProduction">Count Production:</label>
            <input type="text" id="countProduction" class="form-control" [value]="selectedDetail?.countProduction" readonly />
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
